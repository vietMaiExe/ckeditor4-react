/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CKEditor4React={},e.React)}(this,(function(e,t){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=r(t),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function a(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var i=["activeEnterModeChange","activeFilterChange","afterCommandExec","afterInsertHtml","afterPaste","afterPasteFromWord","afterSetData","afterUndoImage","ariaEditorHelpLabel","ariaWidget","autogrow","beforeCommandExec","beforeDestroy","beforeGetData","beforeModeUnload","beforeSetMode","beforeUndoImage","blur","change","configLoaded","contentDirChanged","contentDom","contentDomInvalidated","contentDomUnload","contentPreview","customConfigLoaded","dataFiltered","dataReady","destroy","dialogHide","dialogShow","dirChanged","doubleclick","dragend","dragstart","drop","elementsPathUpdate","exportPdf","fileUploadRequest","fileUploadResponse","floatingSpaceLayout","focus","getData","getSnapshot","insertElement","insertHtml","insertText","instanceReady","key","langLoaded","loadSnapshot","loaded","lockSnapshot","maximize","menuShow","mode","notificationHide","notificationShow","notificationUpdate","paste","pasteFromWord","pluginsLoaded","readOnly","removeFormatCleanup","required","resize","save","saveSnapshot","selectionChange","setData","stylesRemove","stylesSet","template","toDataFormat","toHtml","uiSpace","unlockSnapshot","updateSnapshot","widgetDefinition"],d=["beforeLoad","namespaceLoaded"],c=a(a([],i,!0),d,!0),s="__CKE__";function u(e){return"".concat(s).concat(e)}function l(e){return e.substr(s.length)}function f(e){var t=e.substr(0,1).toUpperCase()+e.substr(1);return"on".concat(t)}function p(e){return e.substr(2,1).toLowerCase()+e.substr(3)}var y=a(a([],i,!0),d,!0).reduce((function(e,t){var r;return o(o({},e),((r={})[t]=u(t),r))}),{});function v(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}function g(e,t,r){var n={display:"none",visibility:"hidden"};return"classic"===e?n:"ready"===t?null!=r?r:void 0:n}function h(e){var t=e.debug,r=e.editor,n=e.evtName,o=e.handler,a=e.listenerData,i=e.priority,d=t&&Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),c=o;return t&&(c=function(e){console.log({operation:"invoke",editor:r.name,evtName:n,handlerId:d,data:e.data,listenerData:e.listenerData}),o(e)}),t&&console.log({operation:"register",editor:r.name,evtName:n,handlerId:d}),r.on(n,c,null,a,i),function(){t&&console.log({operation:"unregister",editor:r.name,evtName:n,handlerId:d}),r.removeListener(n,c)}}var m,b={};function O(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function E(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function S(e,t){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof e||e.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(m||(m=S.scriptLoader(e).then((function(e){return t&&t(e),e}))),m)}Object.defineProperty(b,"__esModule",{value:!0}),S.scriptLoader=function(e){return new Promise((function(t,r){var n,o,a,i,d;n=e,o=function(e){return m=void 0,e?r(e):window.CKEDITOR?void t(CKEDITOR):r(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))},i=document.head||document.getElementsByTagName("head")[0],d=document.createElement("script"),"function"==typeof o&&(a=o,o={}),o=o||{},a=a||function(){},d.type=o.type||"text/javascript",d.charset=o.charset||"utf8",d.async=!("async"in o)||!!o.async,d.src=n,o.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(d,o.attrs),o.text&&(d.text=String(o.text)),("onload"in d?O:E)(d,a),d.onload||O(d,a),i.appendChild(d)}))},b.debounce=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){clearTimeout(r);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];r=setTimeout(e.bind.apply(e,[n].concat(a)),t)}};var x=b.getEditorNamespace=S,C=require.resolve("ckeditor4"),D=n.useEffect,k=n.useReducer,w=n.useRef;console.log("ckeditorPath",C);var T=C+"/ckeditor.js",j={};function P(e){var t=e.config,r=e.debug,n=e.dispatchEvent,o=e.subscribeTo,a=void 0===o?c:o,i=e.editorUrl,u=e.element,l=e.initContent,f=e.type,p=void 0===f?"classic":f,v=w(i||T),g=w(null!=a?a:c),m=w(r),b=w(n),O=w(l),E=w(t||j),S=w(p),C=k(R,{editor:void 0,hookStatus:"init"}),P=C[0],L=P.editor,U=P.hookStatus,_=C[1];return D((function(){if(u&&!L){_({type:"loading"});x(v.current,(function(e){var t;-1!==g.current.indexOf("namespaceLoaded")&&(null===(t=b.current)||void 0===t||t.call(b,{type:y.namespaceLoaded,payload:e}))})).then((function(e){var t,r="inline"===S.current,n=E.current.readOnly;-1!==g.current.indexOf("beforeLoad")&&(null===(t=b.current)||void 0===t||t.call(b,{type:y.beforeLoad,payload:e}));var o=e[r?"inline":"replace"](u,E.current);g.current.filter((function(e){return-1===d.indexOf(e)})).forEach((function(e){h({debug:m.current,editor:o,evtName:e,handler:function(t){var r;null===(r=b.current)||void 0===r||r.call(b,{type:"".concat(s).concat(e),payload:t})}})})),h({debug:m.current,editor:o,evtName:"loaded",handler:function(){_({type:"loaded"})},priority:-1}),h({debug:m.current,editor:o,evtName:"instanceReady",handler:function(e){var t=e.editor;_({type:"ready"}),r&&!n&&t.setReadOnly(!1),O.current&&t.setData(O.current,{noSnapshot:!0,callback:function(){t.resetUndo()}})},priority:-1}),h({debug:m.current,editor:o,evtName:"destroy",handler:function(){_({type:"destroyed"})},priority:-1}),_({type:"unloaded",payload:o})})).catch((function(e){console.error(e),_({type:"error"})}))}return function(){L&&L.destroy()}}),[L,u]),{editor:L,status:null==L?void 0:L.status,error:"error"===U,loading:"loading"===U}}function R(e,t){switch(t.type){case"init":return o(o({},e),{hookStatus:"init"});case"loading":return o(o({},e),{hookStatus:"loading"});case"unloaded":return{editor:t.payload,hookStatus:"unloaded"};case"loaded":return o(o({},e),{hookStatus:"loaded"});case"ready":return o(o({},e),{hookStatus:"ready"});case"destroyed":return{editor:void 0,hookStatus:"destroyed"};case"error":return{editor:void 0,hookStatus:"error"};default:return e}}var L,U,_,I,N={exports:{}};N.exports=function(){if(I)return _;I=1;var e=U?L:(U=1,L="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function r(){}return r.resetWarningCache=t,_=function(){function n(t,r,n,o,a,i){if(i!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}function o(){return n}n.isRequired=n;var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:o,element:n,elementType:n,instanceOf:o,node:n,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a}}()();var K=n.useEffect,F=n.useRef,H=n.useState;function A(e){var t=e.config,r=void 0===t?{}:t,o=e.debug,a=e.editorUrl,i=e.initData,d=e.name,c=e.readOnly,s=e.style,u=e.type,y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["config","debug","editorUrl","initData","name","readOnly","style","type"]),h=H(null),m=h[0],b=h[1],O=F(y);r&&"boolean"==typeof c&&(r.readOnly=c);var E=P({config:r,dispatchEvent:function(e){var t=e.type,r=e.payload,n=f(l(t)),o=O.current[n];o&&o(r)},debug:o,editorUrl:a,element:m,initContent:"string"==typeof i?i:void 0,subscribeTo:Object.keys(y).filter((function(e){return 0===e.indexOf("on")})).map(p),type:u}),S=E.editor,x=E.status;return K((function(){var e="inline"!==u&&S&&("loaded"===x||"ready"===x);return s&&e&&S.container.setStyles(s),function(){s&&e&&Object.keys(s).map(v).forEach((function(e){S.container.removeStyle(e)}))}}),[S,x,s,u]),K((function(){S&&"ready"===x&&"boolean"==typeof c&&S.setReadOnly(c)}),[S,x,c]),n.createElement("div",{id:null!=d?d:void 0,ref:b,style:g(null!=u?u:"classic",x,s)},"string"==typeof i?null:i)}var M=o({config:N.exports.object,debug:N.exports.bool,editorUrl:N.exports.string,initData:N.exports.node,name:N.exports.string,readOnly:N.exports.bool,style:N.exports.object,type:N.exports.oneOf(["classic","inline"])},c.reduce((function(e,t){var r;return o(o({},e),((r={})[f(t)]=N.exports.func,r))}),{}));A.propTypes=M,e.CKEditor=A,e.CKEditorEventAction=y,e.prefixEventName=u,e.registerEditorEventHandler=h,e.stripPrefix=l,e.useCKEditor=P,Object.defineProperty(e,"__esModule",{value:!0})}));
